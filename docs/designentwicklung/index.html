<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
<title>Select Names</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.0.0/flatly/bootstrap.min.css">
<!--<link href="dist/bootstrap-select-dropdown.css" rel="stylesheet" type="text/css">-->
<link href="docs/bundle.css" rel="stylesheet" type="text/css">
<style>
body { background-color: #FFFFFF }
.container { margin-top: 150px; max-width: 450px; }

#table {
  background-color: lightblue;
}
</style>
</head>
<script>

$("#more_options").hide()
</script>
<body>
<!-- MAIN MENU -->
<div id="mySidenav" class="sidenav">
  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
  <a href="#">Project</a>
  <a href="#">Help</a>
  <a href="#" onclick="kalauer()">Kalauer des Tages</a>
</div>

<span style="font-size:30px;cursor:pointer" onclick="openNav()"><h4>&#9776; Project & Help</h4></span>
<span style="position: absolute; font-size:30px;cursor:pointer; top:0; right:0" id="back1" class="back2"><h4>&#9776; Back to Filter Menu</h4></span>

<script>


function openNav() {
  document.getElementById("mySidenav").style.width = "300px";
}

function closeNav() {
  document.getElementById("mySidenav").style.width = "0";
}
</script>

<script>
function kalauer() {
alert("Spielen zwei Blondinnen Schach. Fragt die Eine 'Hast du die Regel im Kopf?'... 'Wieso, blute ich aus der Nase?'")
}
</script>
<!-- FILTER MENU -->

<div id="myFilter" class="sidefilter">
  <a href="javascript:void(0)" class="closebtn" onclick="closeFilter()">&times;</a>
  <a href="#" id="yah"><h2>You are here:<h2></a>
  <a href="#" id="lp">Landing Page</a>
  <a href="#" id="table">Filter Menu</a>
  <a href="#" id="namepers">Selection Result</a>
  <!--<a href="#" id="back">Back to Filter Menu</a>
  <a href="#" id="reset">Reset All</a>-->
</div>
<script>

function openFilter() {
   document.getElementById("myFilter").style.width = "300px";
}

function closeFilter() {
  document.getElementById("myFilter").style.width = "0";
}
</script>

<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script src="dist/fuse.js"></script>
<script src="dist/bootstrap-select-dropdown.js"></script>

<title>Memphis Navigator</title>

<script type="text/javascript" src="js/w2ui.js"></script>
<link rel="stylesheet" type="text/css" href="css/w2ui.css" />
<link rel="stylesheet" type="text/css" href="css/index.css" />
<div id="but" class="center" style="width: 20%; height: 2px;"></div>
<div class="container">

<div class="form-group" id="msall">
    <h1> Memphis Navigator</h1>
    <h5> A tool designed for database navigation</h5>
    <br>
    <br>
    <h5>Select one table!</h5>
    <select id="multiselectall" class="form-control" multiple>
      <option value="Persons" onclick="test()">Persons</option>
      <option value="Objects">Objects</option>
      <option value="Titles">Titles</option>
    </select>
    <span style="font-size:30px;cursor:pointer" id="table1"><h4>&#9776; Show Filter Menu</h4></span>
    <span style="font-size:30px;cursor:pointer" id="more_options"><h4>&#9776; Select more?</h4></span>
    </div>

  <div class="form-group" id="pers_engl">
    <h2>Persons</h2>
    <h6>select english name</h6>
    <select id="ms_persons_engl" class="form-control" multiple>
      <option value="Panehsi">Panehsi</option>
      <option value="Baketmeret">Baketmeret</option>
      <option value="Nayef">Nayef</option>
      <option value="Maatnofret">Maatnofret</option>
      <option value="Horemhebemnetjer">Horemhebemnetjer</option>
      <option value="Nefertiti">Nefertiti</option>
      <option value="Raaa">Raaa</option>
      <option value="Yawaamen">Yawaamen</option>
      <option value="Hornebuy">Hornebuy</option>
      <option value="Ahmose">Ahmose</option>
    </select>
  </div>
  <div class="form-group" id="pers_orig">
    <h6>select original name</h6>
    <select id="ms_persons_orig" class="form-control" multiple>
      <option value="PtH-m-wj#">PtH-m-wj#</option>
      <option value="Jmn-p#[-...]">Jmn-p#[-...]</option>
      <option value="Mr.jjt-Jmn">Mr.jjt-Jmn</option>
      <option value="v#Tj#">v#Tj#</option>
      <option value="vtj">vtj</option>
      <option value="Nb-Jwn.w">Nb-Jwn.w</option>
      <option value="ctX-Hr-wnm=f">ctX-Hr-wnm=f</option>
      <option value="V#.jjt">V#.jjt</option>
      <option value="Nfr.t-jj.tj">Nfr.t-jj.tj</option>
      <option value="JoH-ms">JoH-ms</option>
      <option value="cXm.t-m-H#b">cXm.t-m-H#b</option>
      <option value="P#-n.j-p#-t#">P#-n.j-p#-t#</option>
    </select>
   <span style="font-size:30px;cursor:pointer" id="namepers1"><h4>&#9776; Show Selection Result</h4></span>
  </div>
<div class="form-group" id="digi">
  <h2> Objects </h2>  
  <h6>digital resource</h6>
    <select id="ms_objects_digi" class="form-control" multiple>
      <option value="True">True</option>
      <option value="False">False</option>
    </select>
    <span style="font-size:30px;cursor:pointer" id="nameobj1"><h4>&#9776; Show Selection Result</h4></span>
  </div>
</div>
<div id="bgroup" class="btn-group">
  <button id="p0"> << </button>
  <button id="p1"> >> </button>
</div> 
	 
	  
	  
<div id="main" class="main" style="width: 100%; height: 2000px;"></div>
<script src="dist/bootstrap-select-dropdown.js"> </script>
<script>
$(function() {
   $('span.back2').hide();
});


$("#pers_engl").hide();    
$("#pers_orig").hide(); 
$("#digi").hide(); 

function getValue(file){
   var value= $.ajax({ 
      url: file, 
      async: false
   }).responseText;
   return value;
}

var pstyle = 'background: #c8d3ce;';
persons=$.parseJSON(getValue('data/persons.json'))
persons_sel=$.parseJSON(getValue('data/persons_selection.json'))
objects=$.parseJSON(getValue('data/objects.json'))
objects_sel=$.parseJSON(getValue('data/objects_selection.json'))
titles=$.parseJSON(getValue('data/titles.json'))
titles_sel=$.parseJSON(getValue('data/titles_selection.json'))
relationright=$.parseJSON(getValue('data/relation_rightleftid.json'))  
relationleft=$.parseJSON(getValue('data/relation_leftrightid.json'))  
dating=$.parseJSON(getValue('data/dating_selection.json'))  
objects_with_image=$.parseJSON(getValue('data/objects_with_image.json'))  
selection=$.parseJSON(getValue('data/selection.json'))  

//##################################   PERSONS  #########################################

$('#grid1').w2grid({
    name    : 'grid1',
 show: { 
            toolbar: true,
            footer: true
        },

multiSearch: true,
    searches: persons[0],
    columns: persons[1],
    records: persons[2],
    
    onSearch: function(event) {
        var grid = this;
        },  
        onClick: function(event) {
        $("#bgroup").show();
        var grid = this;
        //Anmerkung: das sind die Ids aus der onSearch Funktion davor!
        //Beim n√§chsten Aufruf, werden die Search IDs ausgegeben
        //Daher hier bei onClick die Methode '.last'
         var plp= [];
         $.each(grid.last.searchIds, function( index, value ) {

             plp.push({"id":grid.get(value).id_persons,"name":grid.get(value).name_translit})
         
        })
       
       $("#but").append(bgroup).trigger('create');
       $(document).ready(function(){
       var count = 0
     
       $("#p1").click(function(){
        
          count=count+1
          document.getElementById('Content2').setAttribute('src',"further/singleview_persons.html?ids="+plp[count].id+"&name="+plp[count].name)
     });
   
      $("#p0").click(function(){
       
          count=count-1
          document.getElementById('Content2').setAttribute('src',"further/singleview_persons.html?ids="+plp[count].id+"&name="+plp[count].name)
     });
      });
      
        event.onComplete = function() {
        var sel_rec_ids = grid.getSelection();
        
        if (sel_rec_ids.length) {
        var sel_record = grid.get(sel_rec_ids[0]);
        w2ui.layout.content('main', '<iframe class="row" id="Content2" style="height: 100%"></iframe>' )
        document.getElementById('Content2').setAttribute('src',"further/singleview_persons.html?ids="+(sel_record.id_persons).toString()+"&name="+(sel_record.name).toString())
       
}
}}
});



//##################################   OBJECTS  #########################################

$('#grid2').w2grid({
    name    : 'grid2',
    show: { 
            toolbar: true,
            footer: true
        },

    multiSearch: true,
    searches: objects[0],
        columns: objects[1],
        records: objects[2],
        onSearch: function (target, info) {
	    var grid = this;
	    
	},
        onClick: function(event) {
        
        $("#bgroup").show();
        var grid = this;
        var plo= [];
        $.each(grid.last.searchIds, function( index, value ) {

             plo.push({"id":grid.get(value).id_objects,"type":grid.get(value).object_type})
         
        })
   
       $("#but").append(bgroup).trigger('create');
  
       $(document).ready(function(){
       var count = 0
       $("#p1").click(function(){
         
          count=count+1
          document.getElementById('Content2').setAttribute('src',"further/singleview_objects.html?ids="+plo[count].id+"&type="+plo[count].type)
     });
   
     $("#p0").click(function(){
          count=count-1
          document.getElementById('Content2').setAttribute('src',"further/singleview_objects.html?ids="+plo[count].id+"&type="+plo[count].type)
     });
      });

        event.onComplete = function() {
        var sel_rec_ids = grid.getSelection();
        
        if (sel_rec_ids.length) {
      
        //w2ui['layout'].show('right', window.instant)
        var sel_record = grid.get(sel_rec_ids[0]);
        w2ui.layout.content('main', '<iframe class="row" id="Content2" style="height: 100%"></iframe>' )
        document.getElementById('Content2').setAttribute('src',"further/singleview_objects.html?ids="+(sel_record.id_objects).toString()+"&type="+(sel_record.object_type).toString())
       
}
}}
});

//##################################   TITLES  #########################################

$('#grid3').w2grid({
    name    : 'grid3',
 show: { 
            toolbar: true,
            footer: true
        },
multiSearch: true,
    searches: titles[0],
        columns: titles[1],
        records: titles[2],
        onSearch: function (target, info) {
	    var grid = this;
            //console.log(grid)
	    
	},
        onClick: function(event) {
       $("#bgroup").show();
        var grid = this;

        var plt= [];
         $.each(grid.last.searchIds, function( index, value ) {

             plt.push({"id":grid.get(value).id,"title":grid.get(value).titles_translat_eng})
         
        })
        
    $("#but").append(bgroup).trigger('create');
      
     $(document).ready(function(){
     var count = 0
     $("#p1").click(function(){
          count=count+1
          document.getElementById('Content2').setAttribute('src',"further/singleview_objects.html?ids="+plt[count].id+"&title="+plt[count].title)
     });
   
     $("#p0").click(function(){
          count=count-1
          document.getElementById('Content2').setAttribute('src',"further/singleview_objects.html?ids="+plt[count].id+"&title="+plt[count].title)
     });
      });



        event.onComplete = function() {
        var sel_rec_ids = grid.getSelection();
        
        if (sel_rec_ids.length) {
        //w2ui['layout'].show('right', window.instant)
        var sel_record = grid.get(sel_rec_ids[0]);
        w2ui.layout.content('main', '<iframe class="row" id="Content2" style="height: 100%"></iframe>' )
        document.getElementById('Content2').setAttribute('src',"further/singleview_titles.html?ids="+(sel_record.id).toString()+"&title="+(sel_record.titles_translat_eng).toString());
      
       
}
}}
});


var config = {

 layout:{
        name: 'layout',
        padding: 0,
        panels: [
            //{ type: 'top', size: 250, resizable: true, minSize: 250, style: pstyle},
            //{ type: 'left', size: 400, resizable: true, minSize: 120, style: pstyle},
            //{ type: 'right', minSize: 900, resizable: true, overflow: 'hidden' },
            { type: 'main', resizable: true, overflow: 'hidden', style: pstyle }
 
        ]
    }

};

$(function () {
    // initialization
    $('#main').w2layout(config.layout);
    w2ui.layout.content('left', '<iframe class="sidebar" id="sidebar" src="sidebar.html" style="width: 100%; height: 100%"></iframe>');
    //w2ui['layout'].show('right', window.instant)
    
    w2ui['layout'].hide('main', window.instant)
    w2ui.layout.content('left', '<iframe class="sidebar" id="sidebar" src="sidebar.html" style="width: 100%; height: 100%"></iframe>');
    //w2ui.layout.content('main', '<iframe class="PI" id="ProjectInformation" src="index.html" style="width: 100%; height: 100%"></iframe>');
    // in memory initialization
    w2ui['grid1'].hideColumn('notes','to_do','link_bonner_totenbuch','link_trismegistos','link_tla','person_no_ranke')
    w2ui['grid2'].hideColumn('object_subtype_other','object_provenance_detail','object_provenance_reconstructed','object_component','object_material','object_text_format','object_image_format','object_location_detail','condition','obejct_technique','object_height','object_lenght','object_width','object_description','notes','to_do','measurements_unit','weblink','literature', 'digital_resource')
    w2ui['grid3'].hideColumn('titles_index','titles_translat','region','gott_kult','ad_sec','field2','field3','field5','field6','titel_hierach','titel_kern','titel_spez_taetigkeit','titel_spez_gott_koenig_pers','titel_spez_epitheton','titel_spez_institution','titel_spez_toponym','old_ids')
    

    $().w2grid(config.grid1);
    $().w2grid(config.grid2);
    $().w2grid(config.grid3);
    
});

</script>
<script type="text/javascript">


  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-36251023-1']);
  _gaq.push(['_setDomainName', 'jqueryscript.net']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();


$(document).ready(function(){
$("#more_options").hide()
$("#bgroup").hide();
$("#more_options").hide();
//$("#namepers").hide();
$("#nameobj").hide();

$('#multiselectall').selectDropdown();
$('#ms_persons_engl').selectDropdown();    
$('#ms_persons_orig').selectDropdown(); 
$('#ms_objects_digi').selectDropdown(); 

$('#table1').click(function (event) {

$("#namepers").css('background-color','transparent')
$("#table").css('background-color','lightblue')


if ($('#multiselectall').val() == "Persons")
{$("#pers_engl").show(); $("#pers_orig").show();$("#digi").hide(); 
w2ui.layout.content('main', w2ui.grid1);
$("#msall").hide();
//$("#nameobj").hide();
$("#namepers").show();
}    
if ($('#multiselectall').val() == "Objects")
{
$("#pers_engl").hide(); $("#pers_orig").hide();$("#digi").show(); 
w2ui.layout.content('main', w2ui.grid2);
$("#msall").hide();
//$("#namepers").hide();
$("#nameobj").show();
}  
//if ($('#multiselectall').val() == "Objects")
//{$("#pers_engl").hide(); $("#pers_orig").hide();$("#digi").show(); 
//w2ui.layout.content('main', w2ui.grid3);
//}  
});
// TEST
$( "#more_options" ).click(function() {
  //alert( "TEST ERFOLGREICH" );
  $("#bsd1-container").show()
  $("#more_options").hide()
  
});
	
$( "#bsd1-container" ).click(function() {
  //alert( "TEST ERFOLGREICH" );
  $("#bsd1-container").hide()
  $("#more_options").show()
  
});
	
$( "#bsd2-container" ).click(function() {
  //alert( "TEST ERFOLGREICH" );
  $("#bsd2-container").hide()
  $("#more_options").show()
  
});
// SELECT PERSONS
$('#namepers1').click(function (event) {
           
           $('span.back2').show();
           $("#namepers").css('background-color','lightblue')
           $("#table").css('background-color','transparent')
           $("#back").css('background-color','transparent')
           $("#back").show();
           //$("#namepers").hide();
           var values = $('#ms_persons_engl').val();
           var searchy=[]
           searchy.push({ field: 'name_translit', value: String(values[0]), operator: 'is'})
           searchy.push({ field: 'name_translit', value: String(values[1]), operator: 'is'})
        
          $( ".container" ).hide();
            $("#back1").click(function(){
               $("#namepers").css('background-color','lightblue')
               $("#table").css('background-color','transparent')
               $("#back").css('background-color','transparent')
               $("#bgroup").hide();
               $( ".container" ).show();
               //$("#back").hide();
               $("#table").show();
               $("#namepers").show();
                w2ui['layout'].hide('main', window.instant)
           });
           
           w2ui['layout'].show('main', window.instant)
           w2ui['grid1'].search(searchy, 'OR');
           });

// SELECT OBJECTS
$('#nameobj1').click(function (event) {
           $('span.back2').show();
           $("#back").show();
           $("#nameobj").hide();
           var values = $('#ms_objects_digi').val();
           var searchy1=[]
           searchy1.push({ field: 'digital_resource', value: String(values[0]), operator: 'is'})
           
        
          $( ".container" ).hide();
            $("#back1").click(function(){
               $("#bgroup").hide();
               $( ".container" ).show();
               //$("#back").hide();
               $("#table").show();
               $("#nameobj").show();
                w2ui['layout'].hide('main', window.instant)
           });
           
           w2ui['layout'].show('main', window.instant)
           
           w2ui['grid2'].search(searchy1, 'OR');
           });
  });

</script>
<script>
$("#reset").click(function(){
window.location.reload(true);
})
</script>

</body>
</html>
